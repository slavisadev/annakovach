/*! Thrive Themes 2021-12-13
* http://www.thrivethemes.com/
* Copyright (c) 2021 Thrive Themes */

"use strict";!function(i){var t={init:function(){var n=this,t=i(".wrap a.page-title-action");this.$add_button=i("<button>",{class:"page-title-action ttb-add-sidebar",text:"Add new Widget Area"}).insertAfter(t).on("click",function(){var t=prompt("Please enter widget area name:");"string"==typeof t&&0<t.length&&(n.toggle_add_button(!0),n.add(t))}),i('[id^="thrive-theme-sidebar-"]').each(function(){var t=i(this),e=t.attr("id").replace("thrive-theme-sidebar-",""),a=t.find(".sidebar-name h2").text().trim();e&&(t.find(".sidebar-description .description").before(i("<button>",{type:"button",class:"button-link button-link-delete ttb-sidebar-remove",text:"Remove Widget Area",style:"float:right","data-id":e})).before(i("<button>",{type:"button",class:"button-link ttb-sidebar-rename",text:"Rename",style:"float:right;margin-right: 10px;","data-id":e})),t.find(".sidebar-name").append(i("<h2>",{html:'<input type="text" class="ttb-sidebar-input" value="'.concat(a,'">\n\t\t\t\t\t\t\t\t<button style="margin-left: 10px;" class="button button-primary ttd-name-save" data-id="').concat(e,'">Save</button>'),class:"ttb-name-edit-".concat(e),style:"display:none"})).find("h2").addClass("ttb-sidebar-name-".concat(e)))}),i(document).on("click",".ttb-sidebar-remove",function(t){var e=i(t.target).parents(".widgets-sortables");e.find(".sidebar-name .spinner").css("visibility","visible"),e.find(".widget-control-remove").trigger("click"),n.toggle_add_button(!0),n.remove(t.target.dataset.id)}).on("click",".ttb-sidebar-rename",function(t){var e=t.target.dataset.id;i(".ttb-sidebar-name-".concat(e)).hide(),i(".ttb-name-edit-".concat(e)).show().find("input").focus()}).on("click",".ttd-name-save",function(t){var e=t.target.dataset.id,a=t.target.previousElementSibling.value;n.toggle_add_button(!0),n.save_name(e,a)})},toggle_add_button:function(t){t?this.$add_button.attr("disabled",!0):this.$add_button.removeAttr("disabled")},add:function(t){var e=this;i.ajax({headers:{"X-WP-Nonce":ttb_widgets.nonce},data:{name:t},url:ttb_widgets.route,method:"POST"}).done(function(t){location.reload(!0)}).fail(console.error).always(function(){return e.toggle_add_button(!1)})},remove:function(t){var e=this;i.ajax({headers:{"X-WP-Nonce":ttb_widgets.nonce},data:{id:t},url:ttb_widgets.route,method:"DELETE"}).done(function(){i('[id^="thrive-theme-sidebar-'.concat(t,'"]')).parent().remove()}).fail(console.error).always(function(){return e.toggle_add_button(!1)})},save_name:function(t,e){var a=this;i.ajax({headers:{"X-WP-Nonce":ttb_widgets.nonce},data:{id:t,name:e},url:ttb_widgets.route+"/title",method:"POST"}).done(function(){i(".ttb-sidebar-name-".concat(t)).html("".concat(e,'<span class="spinner"></span>')).show(),i(".ttb-name-edit-".concat(t)).hide()}).fail(console.error).always(function(){return a.toggle_add_button(!1)})}};i(document).ready(t.init.bind(t))}(jQuery);