/*! Thrive Themes 2021-12-13
* http://www.thrivethemes.com/
* Copyright (c) 2021 Thrive Themes */

"use strict";function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(c){var T,d,i,f,m,s={".js":[],".json":[],".css":[],".html":[]},l="function"==typeof require?require:null;return f=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},m=function(e,t,n){var o,i;if("function"==typeof e[t+n])return t+n;for(o=0;i=s[n][o];++o)if("function"==typeof e[t+i])return t+i;return null},T=function(e,t,n,o,i,s){var r,a,c,l,u,h;for("."!==(r=(n=n.split("/")).pop())&&".."!==r||(n.push(r),r="");null!=(a=n.shift());)if(a&&"."!==a&&(".."===a?(e=t.pop(),s=s.slice(0,s.lastIndexOf("/"))):(t.push(e),e=e[a],s+="/"+a),!e))throw f(o);if(r&&"function"!=typeof e[r]&&((h=m(e,r,".js"))||(h=m(e,r,".json")),h||(h=m(e,r,".css")),h||(h=m(e,r,".html")),h?r=h:2!==i&&"object"===_typeof(e[r])&&(t.push(e),e=e[r],s+="/"+r,r="")),!r)return 1!==i&&e[":mainpath:"]?T(e,t,e[":mainpath:"],o,1,s):T(e,t,"index",o,2,s);if(!(u=e[r]))throw f(o);return u.hasOwnProperty("module")?u.module.exports:(c={},u.module=l={exports:c,id:s+"/"+r},u.call(c,c,l,d(e,t,s)),l.exports)},i=function(e,t,n,o){var i,s=n,r=n.charAt(0),a=0;if("/"===r){if(s=s.slice(1),!(e=c["/"])){if(l)return l(n);throw f(n)}o="/",t=[]}else if("."!==r){if(i=s.split("/",1)[0],!(e=c[i])){if(l)return l(n);throw f(n)}o=i,t=[],(s=s.slice(i.length+1))||(a=(s=e[":mainpath:"])?1:(s="index",2))}return T(e,t,s,n,a,o)},(d=function(t,n,o){return function(e){return i(t,[].concat(n),e,o)}})(c,[],"")}({workspace:{inc:{assets:{js:{architect:{editor:{"editor.js":function(e,t,n){var c,o,i;c=jQuery,o=n("./section-hover"),i={init:function(){TVE.Theme=TVE.Theme||{},TVE.Theme.CONST=thrive_page_params,TVE.CONST.theme.is_theme_template?(TVE.Theme.content.init_selectors(),this.initColumns(),TVE.Theme.sectionHover=new o,TVE.inner.$body.addClass(TVE.Theme.constants.identifiers.EDITOR_CLASS)):TVE.Theme.content.init_selectors(TVE.Editor_Page.editor),this.disableClicks(),TVE.inner_$("html").on("mousedown",function(e){"HTML"===e.target.tagName&&e.stopPropagation()}),TVE.Theme.$wrapper.on("click",this.focusEditorWrapper),"tcb_symbol"!==TVE.CONST.post.post_type&&setTimeout(this.selectFirstElement,100),TVE.add_action("theme.section.after_insert.sidebar",this.initColumns),TVE.do_action("theme.editor.init")},focusEditorWrapper:function(){TVE.main.EditMode.element()||TVE.Theme.$wrapper.is(TVE.ActiveElement)||TVE.Editor_Page.focus_element(TVE.Theme.$wrapper)},selectFirstElement:function(){var e=TVE.Theme.$wrapper;TVE.Theme.selectedSection&&(e=TVE.Theme.$sections[TVE.Theme.selectedSection]),TVE.Editor_Page.focus_element(e)},disableClicks:function(){c("a[onclick]").each(function(){c(this).data("onclick",this.onclick),this.onclick=function(){return!1}})},initColumns:function(){var n,e,o,t,i,s,r=TVE.Theme.$main.find(TVE.Theme.constants.identifiers.MAIN_COLUMNS_SEPARATOR),a=_.throttle(function(){i.html("".concat(o,"%")),t.html(parseFloat(100-o-n).toFixed(2)+"%")},50);TVE.Theme.$sections.sidebar&&TVE.Theme.$sections.sidebar.resizable({minWidth:50,handles:"w,e",start:function(){TVE.Theme.FLAGS.doingResize=!0,s=TVE.getComputedStyle(TVE.Theme.$main[0],"width"),e=TVE.getComputedStyle(r[0],"width"),n=parseFloat(e/s*100).toFixed(2),i=c('<div class="resize-percentage">').appendTo(TVE.Theme.$sections.sidebar),t=c('<div class="resize-percentage">').appendTo(TVE.Theme.$sections.content)},resize:function(e,t){o=Math.max(parseFloat(t.size.width/s*100+n/2).toFixed(2),0),TVE.Theme.$main.tcbCss("--sidebar-size","".concat(o,"%")),TVE.Theme.$sections.sidebar.css({width:"",left:""}),a()},stop:function(){TVE.Theme.FLAGS.LAYOUT_CSS_WRITE=!0,TVE.Theme.$main.head_css({"--sidebar-size":"".concat(o,"%")}),TVE.Theme.FLAGS.LAYOUT_CSS_WRITE=!1,TVE.Theme.$main.tcbCss("--sidebar-size",""),TVE.PostList.layout.masonryRedo(),i.remove(),t.remove(),TVE.Theme.FLAGS.doingResize=!1}});TVE.Theme.content.updateResizeHandlersPosition()}},c(window).on("tcb-ready",i.init.bind(i))},"section-hover.js":function(e,t,n){n("../main/models/layout.js");var o=function(){function n(){_classCallCheck(this,n),this.listenersInit()}return _createClass(n,null,[{key:"hoverClass",get:function(){return"section-hover"}}]),_createClass(n,[{key:"listenersInit",value:function(e){var t=this,n=function(e){e.find(" > div").on("mouseenter",function(e){t.showIcons(e.currentTarget)}).on("mouseleave",function(e){t.hideIcons(e.currentTarget)})};void 0===e?Object.values(TVE.Theme.$sections).forEach(n):n(TVE.Theme.$sections[e])}},{key:"showIcons",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];TVE.Theme.FLAGS.doingResize?this.hideIcons(e):e&&!e.parentElement.classList.contains(n.hoverClass)&&(t&&n.clearHoverClass(),e.parentElement.classList.add(n.hoverClass))}},{key:"hideIcons",value:function(e){e?e.parentElement.classList.remove(n.hoverClass):n.clearHoverClass()}}],[{key:"clearHoverClass",value:function(){TVE.inner.$body.find("."+n.hoverClass).removeClass(n.hoverClass)}}]),n}();t.exports=o}},main:{models:{"layout.js":function(e,t,n){var o=function(){return TVE.inner.window.ThriveTheme.sidebar},i=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,r),this.ID=e,this.setMeta(t)}return _createClass(r,[{key:"selector",get:function(){return".thrive-layout-".concat(this.ID)}}],[{key:"prefix",get:function(){return":not(#layout)"}}]),_createClass(r,[{key:"getMeta",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e?this.meta[e]:this.meta}},{key:"setMeta",value:function(e){e&&e.meta_input&&!e.meta_input.content_width&&(e.meta_input.content_width=r.getContentWidth()),this.meta=e.meta_input}},{key:"name",value:function(){var t=this,e="Custom";if(this.ID){var n=TVE.CONST.theme.layouts.find(function(e){return e.ID===t.ID});n&&(e=n.post_title)}return e}},{key:"save",value:function(t,n){var o=this;TVE.Theme.utils.loadingMessage("Saving Layout"),TVE.$.ajax({url:TVE.CONST.theme.routes.layouts,type:"POST",data:{post_title:t},headers:{"X-WP-Nonce":TVE.CONST.rest_nonce}}).done(function(e){o.convertCss(e),TVE.CONST.theme.layouts.push({ID:e,post_title:t}),o.update(!0),"function"==typeof n&&n(e)}).fail(function(){TVE.page_message("Error saving the layout!",!0,3e3)}).always(function(){TVE.Theme.utils.loadingMessage(!1)})}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(this.ID)return!e&&TVE.Theme.utils.loadingMessage("Updating layout"),TVE.$.ajax({url:"".concat(TVE.CONST.theme.routes.layouts,"/").concat(this.ID),type:"POST",data:{meta_input:_objectSpread({template_id:TVE.Theme.template.ID,style:{css:this.getStyle()}},r.getDataFromPage())},headers:{"X-WP-Nonce":TVE.CONST.rest_nonce}}).done(function(t){var e=TVE.CONST.theme.layouts.findIndex(function(e){return e.ID===t.data.ID});-1===e?TVE.CONST.theme.layouts.push(t.data):TVE.CONST.theme.layouts[e]=t.data,r.getStyleNode().html(t.style),TVE.head_css_remove(TVE.Theme.utils.escapedRegEx(r.prefix,"g"),"_ALL"),TVE.do_action("theme.layout.after_update")}).fail(function(e){TVE.page_message("Error saving the layout!",!0,3e3)}).always(function(e){setTimeout(function(){TVE.Theme.utils.loadingMessage(!1)},2e3)});TVE.page_message("Unknown layout to save!",!0,300)}},{key:"getStyle",value:function(){var e=TVE.stylesheet;TVE.stylesheet=r.getStyleNode()[0].sheet;var t=this.convertSelector(TVE.CSS_Rule_Cache.getCssForSelector(this.selector),this.selector);TVE.stylesheet=e;var n=TVE.$.extend(!0,{},t,this.convertSelector(TVE.CSS_Rule_Cache.getCssForSelector(r.prefix),TVE.Theme.CONST.body_class));for(var o in n)n.hasOwnProperty(o)&&(n[o]=_.map(n[o],function(e,t){return t+"{"+_.map(e,function(e,t){return"".concat(t,":").concat(e)}).join("; ")+"}"}).join(""));return n}},{key:"convertSelector",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={};for(var o in e)if(e.hasOwnProperty(o)&&"@imports"!==o)for(var i in n[o]={},e[o])if(e[o].hasOwnProperty(i)){var s=i.replace(r.prefix,"").replace(t,this.selector).trim();n[o][s]=e[o][i]}return n}},{key:"convertCss",value:function(e){TVE.inner.$body.addClass("thrive-layout-".concat(e));var t=r.getStyleNode(),n=t.html().replace(TVE.Theme.utils.escapedRegEx("thrive-layout-".concat(this.ID),"g"),"thrive-layout-".concat(e));t.html(n),TVE.inner.$body.removeClass("thrive-layout-".concat(this.ID)),this.ID=e}}],[{key:"load",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:TVE.$.noop;t=parseInt(t),n=parseInt(n),t!==n&&(TVE.Theme.utils.loadingMessage("Loading layout"),TVE.$.ajax({url:"".concat(TVE.CONST.theme.routes.layouts,"/").concat(t),type:"GET",headers:{"X-WP-Nonce":TVE.CONST.rest_nonce}}).done(function(e){n&&TVE.inner.$body.removeClass("thrive-layout-".concat(n)),TVE.inner.$body.addClass("thrive-layout-".concat(t)),r.getStyleNode().html(e.style),r.fixLayoutStructure(e),TVE.head_css_remove(TVE.Theme.utils.escapedRegEx(r.prefix,"g"),"_ALL"),setTimeout(function(){TVE.Theme.utils.loadingMessage(!1),TVE.Theme.content.updateResizeHandlersPosition(),TVE.PostList.layout.masonryRedo(),TVE.Theme.utils.loadingMessage("Updating also the template!","save-template"),TVE.Theme.content.save(function(){TVE.Theme.utils.loadingMessage(!1,"save-template"),"function"==typeof o&&o(t)},!0,!0)},42)}).fail(function(){TVE.page_message("Error loading layout!",!0,3e3),TVE.Theme.utils.loadingMessage(!1)}))}},{key:"getStyleNode",value:function(){var e=TVE.inner.jQuery("#thrive-theme-layout-css");return 0===e.length&&(e=TVE.inner.jQuery('<style id="thrive-theme-layout-css" type="text/css"></style>')).insertBefore(TVE.inner.jQuery("#thrive-template-css")),e}},{key:"hasUnsavedChanges",value:function(){var n=r.getInstance().getMeta(),e=void 0!==_.find(r.getDataFromPage(),function(e,t){return n[t]!==e});return e||(e=_.some(TVE.CSS_Rule_Cache.getCssForSelector(r.prefix),function(e){return 0<Object.values(e).length})),e}},{key:"fixLayoutStructure",value:function(e){var t=!!parseInt(e.meta_input.hide_sidebar);TVE.Theme.$main.toggleClass(TVE.Theme.constants.identifiers.FLIP_SECTIONS_CLASS,!!parseInt(e.meta_input.sidebar_on_left)),TVE.Theme.$sections.sidebar.toggleClass(TVE.Theme.constants.identifiers.HIDE_SECTION_CLASS,t),o().isOffScreen()&&(t?o()._get("off-screen").destroy():o().offScreenRefresh())}},{key:"getDataFromPage",value:function(){return{sidebar_on_left:TVE.Theme.$main.hasClass(TVE.Theme.constants.identifiers.FLIP_SECTIONS_CLASS)?1:0,content_width:this.getContentWidth(),hide_sidebar:this.isSidebarHidden()}}},{key:"isSidebarHidden",value:function(){return TVE.Theme.$sections.sidebar.hasClass(TVE.Theme.constants.identifiers.HIDE_SECTION_CLASS)?1:0}},{key:"getContentWidth",value:function(){return r.isFullWidth()?"100%":r.getWidth("content")}},{key:"setWidth",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?TVE.Theme.$wrapper.tcbCss("--layout-".concat(t,"-width"),e):(TVE.Theme.FLAGS.LAYOUT_CSS_WRITE=!0,TVE.Theme.$wrapper.head_css(_defineProperty({},"--layout-".concat(t,"-width"),e)),TVE.Theme.FLAGS.LAYOUT_CSS_WRITE=!1,TVE.Theme.$wrapper.tcbCss("--layout-".concat(t,"-width"),"")),r}},{key:"getWidth",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return TVE.Theme.$wrapper.tcbCss("--layout-".concat(e,"-width"))}},{key:"isFullWidth",value:function(){return"100%"===r.getWidth("background")}},{key:"getInstance",value:function(){var t=TVE.Theme.models.Content.getLayoutId();return new r(t,TVE.CONST.theme.layouts.find(function(e){return e.ID===t}))}}]),r}();t.exports=i}}}}}}}}})("workspace/inc/assets/js/architect/editor/editor");