/*! Thrive Architect - 2021-12-13
* http://www.thrivethemes.com/
* Copyright (c) 2021 Thrive Themes */

"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(i,!0).forEach(function(t){_defineProperty(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(l){var p,f,s,g,d,o={".js":[],".json":[],".css":[],".html":[]},c="function"==typeof require?require:null;return g=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},d=function(t,e,i){var a,s;if("function"==typeof t[e+i])return e+i;for(a=0;s=o[i][a];++a)if("function"==typeof t[e+s])return e+s;return null},p=function(t,e,i,a,s,o){var n,r,l,c,h,u;for("."!==(n=(i=i.split("/")).pop())&&".."!==n||(i.push(n),n="");null!=(r=i.shift());)if(r&&"."!==r&&(".."===r?(t=e.pop(),o=o.slice(0,o.lastIndexOf("/"))):(e.push(t),t=t[r],o+="/"+r),!t))throw g(a);if(n&&"function"!=typeof t[n]&&((u=(u=(u=(u=d(t,n,".js"))||d(t,n,".json"))||d(t,n,".css"))||d(t,n,".html"))?n=u:2!==s&&"object"===_typeof(t[n])&&(e.push(t),t=t[n],o+="/"+n,n="")),!n)return 1!==s&&t[":mainpath:"]?p(t,e,t[":mainpath:"],a,1,o):p(t,e,"index",a,2,o);if(!(h=t[n]))throw g(a);return h.hasOwnProperty("module")?h.module.exports:(l={},h.module=c={exports:l,id:o+"/"+n},h.call(l,l,c,f(t,e,o)),c.exports)},s=function(t,e,i,a){var s,o=i,n=i.charAt(0),r=0;if("/"===n){if(o=o.slice(1),!(t=l["/"])){if(c)return c(i);throw g(i)}a="/",e=[]}else if("."!==n){if(s=o.split("/",1)[0],!(t=l[s])){if(c)return c(i);throw g(i)}a=s,e=[],(o=o.slice(s.length+1))||(r=(o=t[":mainpath:"])?1:(o="index",2))}return p(t,e,o,i,r,a)},(f=function(e,i,a){return function(t){return s(e,[].concat(i),t,a)}})(l,[],"")}({workspace:{editor:{js:{editor:{src:{"lightspeed-optimize.js":function(t,e,o){!function(t){var e=t(document.body);e.on("update_checkout",function(t){return t.stopImmediatePropagation()}),void 0===tcb_lightspeed_optimize.optimization_type&&(tcb_lightspeed_optimize.optimization_type=[]);var i=new(o("./lightspeed")(t))(tcb_lightspeed_optimize.post),a=_objectSpread({key:tcb_lightspeed_optimize.key,id:tcb_lightspeed_optimize.post.ID},i.getLightspeedData({$content:e,stylesToOptimize:tcb_lightspeed_optimize.optimization_type.includes("css")?tcb_lightspeed_optimize.styles:[],jsModules:tcb_lightspeed_optimize.optimization_type.includes("js")?tcb_lightspeed_optimize.js_modules:{},gutenbergModules:tcb_lightspeed_optimize.optimization_type.includes("gutenberg")?tcb_lightspeed_optimize.gutenberg_modules:{},wooModules:tcb_lightspeed_optimize.optimization_type.includes("woo")?tcb_lightspeed_optimize.woo_modules:{}}));0===a.optimized_styles.length&&console.warn("[".concat(tcb_lightspeed_optimize.post.ID,'] "').concat(tcb_lightspeed_optimize.post.post_title,'" has no styles saved!!!')),0===a.js_modules.length&&console.warn("[".concat(tcb_lightspeed_optimize.post.ID,'] "').concat(tcb_lightspeed_optimize.post.post_title,'" has no js modules saved!!!')),0===a.gutenberg_modules.length&&console.warn("[".concat(tcb_lightspeed_optimize.post.ID,'] "').concat(tcb_lightspeed_optimize.post.post_title,'" has no gutenberg modules saved!!!')),0===a.woo_modules.length&&console.warn("[".concat(tcb_lightspeed_optimize.post.ID,'] "').concat(tcb_lightspeed_optimize.post.post_title,'" has no woo modules saved!!!'));var s={};document.dispatchEvent(new CustomEvent("lightspeed_data.tcb",{detail:s})),a.extra_data=s,setTimeout(function(){t.ajax({xhrFields:{withCredentials:!0},headers:{"X-WP-Nonce":tcb_lightspeed_optimize.nonce},type:"POST",url:tcb_lightspeed_optimize.route,data:a}).always(function(t){parent&&"function"==typeof parent.postMessage&&parent.postMessage({from:"lightspeed-optimize",id:parseInt(tcb_lightspeed_optimize.post.ID),result:!!t.success,key:tcb_lightspeed_optimize.key},"*")})},42)}(jQuery)},"lightspeed.js":function(t,e,i){e.exports=function(u){return function(){function c(t){_classCallCheck(this,c),this.post=t,this.flags={}}return _createClass(c,[{key:"resetFlags",value:function(){this.flags={}}},{key:"getLightspeedData",value:function(t){var e=t.$content,i=void 0===e?u():e,a=t.stylesToOptimize,s=void 0===a?null:a,o=t.jsModules,n=void 0===o?null:o,r=t.gutenbergModules,l=void 0===r?null:r,c=t.wooModules,h=void 0===c?TVE.CONST.lightspeed.woo_modules:c;return null===s&&(s=TVE.CONST.lightspeed.styles_to_optimize),null===n&&(n=TVE.CONST.lightspeed.js_modules),null===l&&(l=TVE.CONST.lightspeed.gutenberg_modules),h=h||{},{optimized_styles:this.getOptimizedCss(s),js_modules:this.getJsModulesToSave(i,n),woo_modules:this.getJsModulesToSave(i,h),gutenberg_modules:this.getJsModulesToSave(i,l),assets_to_preload:this.getAssetsToPreload(i)}}},{key:"getOptimizedCss",value:function(t){var a=this,e=0<arguments.length&&void 0!==t?t:[];this.resetFlags();var s=[],o={},n={};for(var i in c.getMediaRules().forEach(function(t){return o["@media ".concat(t)]=[]}),u(e.map(function(t){return"#".concat(t,"-css")}).join(",")).each(function(t,e){var i=e.sheet;try{i&&i.cssRules&&_toConsumableArray(i.cssRules).forEach(function(t){switch(t.type){case CSSRule.STYLE_RULE:var e=a.isSelectorUsed(t.selectorText);e&&s.push(t.cssText.replace(t.selectorText,e));break;case CSSRule.MEDIA_RULE:var i=c.conditionText(t);i?(void 0===o[i]&&(o[i]=[]),_toConsumableArray(t.cssRules).forEach(function(t){if(t.type===CSSRule.STYLE_RULE){var e=a.isSelectorUsed(t.selectorText);e&&o[i].push(t.cssText.replace(t.selectorText,e))}else console.error(t)})):s.push(t.cssText);break;case CSSRule.KEYFRAMES_RULE:n[t.name]=t.cssText;break;case CSSRule.SUPPORTS_RULE:}})}catch(t){console.warn(t)}}),o)o[i].length&&s.push("".concat(i,"{").concat(o[i].join(""),"}"));var r=s.join("");for(var l in n)r.includes(l)&&s.push(n[l]);return s.join("")}},{key:"isSelectorUsed",value:function(t){var i=this;return t.split(",").filter(function(e){return!e.includes(".tve-state-hover")&&!e.includes("tcb-edit-mode")&&(e=e.replace(".tve_editor_page",".whatever-class-no-one-cares"),e=c.getRealSelector(e),0<u(e).filter(":not(".concat(c.excludedContainers.join(" *,")," *)")).length||i.customSelectorChecks.some(function(t){return"function"==typeof t&&t(e)}))}).map(function(t){return t.trim()}).join(",")}},{key:"hasAnimationsAndActions",value:function(e){var t=!1;return e.includes("tve_anim_start")&&(void 0===this.flags["has-animations-actions-element"]&&(this.flags["has-animations-actions-element"]=_toConsumableArray(new Set(_toConsumableArray(u(".tve_ea_thrive_animation")).map(function(t){return t.className.replace("tve_anim_start","").match(/(tve_anim_\S*)/),RegExp.$1.trim()})))),t=!e.replace("tve_anim_start","").match(/tve_anim_\S*/)||this.flags["has-animations-actions-element"].some(function(t){return e.includes(t)})),t}},{key:"hasFileUpload",value:function(t){return void 0===this.flags["has-file-upload"]&&(this.flags["has-file-upload"]=0<u(".tve_lg_file").length),this.flags["has-file-upload"]&&t.match(/tcb-file-list/)}},{key:"hasLeadGeneration",value:function(t){return void 0===this.flags["has-lead-generation"]&&(this.flags["has-lead-generation"]=0<u(".thrv_lead_generation_container").length),this.flags["has-lead-generation"]&&t.match(/tve-lg-error|thrv-svg-icon svg|tcb-permanently-hidden|tvd-toast|thrv_lead_generation_container|tcb-form-loader-icon/)}},{key:"hasContactForm",value:function(t){return void 0===this.flags["contact-form"]&&(this.flags["contact-form"]=0<u(".thrv-contact-form").length),this.flags["contact-form"]&&t.match(/tcb-cf-error|tar-disabled|thrv-svg-icon svg|tvd-toast/)}},{key:"hasUserProfile",value:function(t){return void 0===this.flags["has-user-profile"]&&(this.flags["has-user-profile"]=0<u(".tve-user-profile").length),this.flags["has-user-profile"]&&t.match(/tve-up-error|tvd-toast|tcb-form-loader-icon/)}},{key:"hasToggles",value:function(t){return void 0===this.flags["has-faq-element"]&&(this.flags["has-faq-element"]=0<u(".tve_faq").length),this.flags["has-faq-element"]&&t.includes("tve_oFaq")}},{key:"hasTooltip",value:function(t){return void 0===this.flags["has-tooltip"]&&(this.flags["has-tooltip"]=0<u(".tve_ea_thrive_tooltip").length),this.flags["has-tooltip"]&&t.includes(".tve_ui_tooltip")}},{key:"hasMenu",value:function(t){return void 0===this.flags["has-menu"]&&(this.flags["has-menu"]=0<u(".thrv_widget_menu").length),this.flags["has-menu"]&&t.includes(".thrv_widget_menu")}},{key:"hasMegaMenu",value:function(t){return void 0===this.flags["has-megamenu"]&&(this.flags["has-megamenu"]=0<u(".thrv_widget_menu.tcb-mega-std").length),this.flags["has-megamenu"]&&t.match(/tcb-mega-|tcb-mm-/)}},{key:"hasTOC",value:function(t){return void 0===this.flags["has-toc"]&&(this.flags["has-toc"]=0<u(".tve-toc").length),this.flags["has-toc"]&&t.includes(".tve-toc")}},{key:"hasNotification",value:function(t){return void 0===this.flags["has-notification"]&&(this.flags["has-notification"]="tve_notifications"===this.post.post_type||0<u(".thrv_lead_generation, .tve-user-profile, .tcb-login-form-wrapper").length),this.flags["has-notification"]&&t.includes(".notifications-content-wrapper")}},{key:"hasWooMiniCart",value:function(t){return void 0===this.flags["has-woo-mini-cart"]&&(this.flags["has-woo-mini-cart"]=0<u(".tcb-woo-mini-cart").length),this.flags["has-woo-mini-cart"]&&t.match(/tcb-woo-mini-cart-content-wrapper|widget_shopping_cart_content|tcb-woo-mini-cart/)}},{key:"hasPostList",value:function(t){return void 0===this.flags["has-post-list"]&&(this.flags["has-post-list"]=0<u(".tcb-post-list").length),this.flags["has-post-list"]&&t.match(/-article-cover|tve-loading/)}},{key:"hasParallax",value:function(t){return void 0===this.flags["has-parallax-element"]&&(this.flags["has-parallax-element"]=_toConsumableArray(u('[data-tve-scroll*="parallax"]')).some(function(t){var e;try{var i=JSON.parse(t.dataset.tveScroll);e="parallax"===i.mode&&0<Object.keys(i.parallax).length}catch(t){e=!1}return e})),this.flags["has-parallax-element"]&&t.includes("tve-scroll-parallax")}},{key:"hasImagePopup",value:function(t){return void 0===this.flags["has-image-popup"]&&(this.flags["has-image-popup"]=0<u('[data-tcb-events*="thrive_zoom"]').length),this.flags["has-image-popup"]&&t.match(/tve_zoom_|tve_close_lb|thrv-svg-icon svg/)}},{key:"hasNumericPagination",value:function(t){return void 0===this.flags["has-numeric-pagination"]&&(this.flags["has-numeric-pagination"]=0<u('[data-type="numeric"].tcb-pagination').length),this.flags["has-numeric-pagination"]&&t.match(/tcb-pagination-number/)}},{key:"hasVideoPopup",value:function(t){return void 0===this.flags["has-video-popup"]&&(this.flags["has-video-popup"]=0<u('[data-tcb-events*="thrive_video"]').length),this.flags["has-video-popup"]&&t.match(/tve_responsive_video_container|tcb-video-popup/)}},{key:"hasLightboxAction",value:function(e){return void 0===this.flags["has-lightbox-action"]&&(this.flags["has-lightbox-action"]=_toConsumableArray(u(".tve_evt_manager_listen")).map(function(t){var e="";return t.dataset.tcbEvents&&(t.dataset.tcbEvents.match(/l_anim":"(\w*)"/),e=RegExp.$1.trim()),e}).filter(function(t){return t})),this.flags["has-lightbox-action"].some(function(t){return e.includes("tve_lb_anim_".concat(t))})}},{key:"hasFloatingVideo",value:function(e){return void 0===this.flags["has-floating-video"]&&(this.flags["has-floating-video"]=_toConsumableArray(u(".thrv_responsive_video[data-float-position]")).map(function(t){return t.dataset.floatPosition})),e.includes(".tve_responsive_video_container")&&this.flags["has-floating-video"].some(function(t){return e.includes(t)})}},{key:"hasACFVideo",value:function(t){return void 0===this.flags["has-acf-video"]&&(this.flags["has-acf-video"]=0<u(".thrv_responsive_video.tcb-custom-field-source").length),this.flags["has-acf-video"]&&t.match(/.tve_responsive_video_container/)}},{key:"hasGalleryLightbox",value:function(t){return void 0===this.flags["has-gallery-lightbox"]&&(this.flags["has-gallery-lightbox"]=0<u('[data-click-behavior="fullscreen"].tcb-image-gallery').length),this.flags["has-gallery-lightbox"]&&t.match(/tcb-gallery-overlay/)}},{key:"hasTableSort",value:function(t){return void 0===this.flags["has-table-sort"]&&(this.flags["has-table-sort"]=0<u(".tve_make_sortable").length),this.flags["has-table-sort"]&&t.match(/tcb-sort/)}},{key:"hasNumberCounter",value:function(t){return void 0===this.flags["has-number-counter"]&&(this.flags["has-number-counter"]=0<u(".tve-number-counter").length),this.flags["has-number-counter"]&&t.match(/tcb-digit|tve-number-counter-temporary-clone/)}},{key:"hasImageGallery",value:function(t){return void 0===this.flags["has-image-gallery"]&&(this.flags["has-image-gallery"]=0<u(".tcb-image-gallery").length),this.flags["has-image-gallery"]&&t.match(/tcb-image-gallery/)}},{key:"hasSearch",value:function(t){return void 0===this.flags["has-search-form"]&&(this.flags["has-search-form"]=0<u(".thrv-search-form").length),this.flags["has-search-form"]&&t.match(/thrv-search-form|tve-sf-overlay-container/)}},{key:"hasImageSlider",value:function(t){return void 0===this.flags["has-image-slider"]&&(this.flags["has-image-slider"]=0<u('[data-type="carousel"].tcb-image-gallery').length),this.flags["has-image-slider"]&&t.match(/slick-/)}},{key:"getJsModulesToSave",value:function(t,e){var i=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];s&&t.find(s).length&&i.push(a)}return i}},{key:"getAssetsToPreload",value:function(t){var s=[];return t.find('.tcb-video-cover[data-preload="1"]').each(function(t,e){var i=u(e);switch(i.attr("data-cover-thumbnail-type")){case"dynamic":s.push({type:"dynamic",url:"featured"});break;case"static":default:var a=i.find(".tcb-video-cover-image").attr("src");void 0!==a&&0<a.length&&s.push({type:"image",url:a})}}),s.filter(function(e,t,i){return t===i.findIndex(function(t){return t.url===e.url})})}},{key:"isTCBLightbox",value:function(t){return void 0===this.flags["has-lightbox"]&&(this.flags["has-lightbox"]=0<u(".tve_p_lb_content:visible").length),("tcb_lightbox"===this.post.post_type||this.flags["has-lightbox"])&&t.match(/tve-l-open|tve_lb_|tve_p_lb_/)}},{key:"customSelectorChecks",get:function(){var e=this;return[this.hasAnimationsAndActions,this.hasNumericPagination,this.hasGalleryLightbox,this.hasLeadGeneration,this.hasLightboxAction,this.hasNumberCounter,this.hasFloatingVideo,this.hasImageGallery,this.hasNotification,this.hasImageSlider,this.hasWooMiniCart,this.hasUserProfile,this.hasContactForm,this.hasImagePopup,this.isTCBLightbox,this.hasVideoPopup,this.hasFileUpload,this.hasTableSort,this.hasACFVideo,this.hasParallax,this.hasMegaMenu,this.hasPostList,this.hasToggles,this.hasTooltip,this.hasMenu,this.hasTOC,this.hasSearch].map(function(t){return t.bind(e)}).concat(window.lightspeed_extra_checks||[])}}],[{key:"getRealSelector",value:function(t){return t.replace(/::\S+/g,"").replace(new RegExp("(".concat([].concat([":hover",":active",":focus-within",":focus",":visited",":after",":before",":checked",":empty"],[".tve_anim_start",".thrv_data_element_start",".go-down",".next",".ct_finished",".expired",".tcb-disabled-pagination-button",".tve-state-expanded",".expand-children",".tve-m-expanded",".tve-state-active",".tcb_show_all_hidden"]).map(function(t){return t.replace(".","\\.")}).join("|"),")"),"g"),"")}},{key:"conditionText",value:function(t){var e=null;return t.conditionText&&(e=t.conditionText),t.cssText.match(/([^{]*){/m)&&(e=RegExp.$1.trim()),e}},{key:"getMediaRules",value:function(){return"undefined"==typeof TVE?["(min-width: 300px)","(max-width: 1023px)","(max-width: 767px)"]:Object.values(TVE.main.responsive).map(function(t){return t.media})}},{key:"excludedContainers",get:function(){return[".tve-image-resize",".fr-dropdown-menu"]}}]),c}()}}}}}}}})("workspace/editor/js/editor/src/lightspeed-optimize");