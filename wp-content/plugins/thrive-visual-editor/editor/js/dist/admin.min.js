/*! Thrive Architect - 2022-01-25
* http://www.thrivethemes.com/
* Copyright (c) 2022 Thrive Themes */

"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}!function(o){var t=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"register",value:function(){YoastSEO.app.registerPlugin("tcbYoastPlugin",{status:"loading"}),n.fetchData()}},{key:"fetchData",value:function(){o.ajax({url:ajaxurl,type:"post",dataType:"json",data:{post_id:TCB_Post_Edit_Data.post_id,action:"get_tcb_content"}}).done(function(e){YoastSEO.app.pluginReady("tcbYoastPlugin"),YoastSEO.app.registerModification("content",function(t){return n.parseTCBContent(t,e.content)},"tcbYoastPlugin",5)})}},{key:"parseTCBContent",value:function(t,e){if(e){var n=".tcb-style-wrap",a=o("<div>").append(o(e).find(n).addBack(n));a.find("*:empty:not(img,input,br)").remove(),e=a[0].innerHTML}return e||t}}]),n}();o(window).on("YoastSEO:ready",t.register),o(function(){var n=o(document);n.on("click.tcb","#tcb2-migrate-post",function(t,e){o("#tcb-admin-page-loader").show(),o.ajax({type:"post",url:ajaxurl,dataType:"json",data:{_nonce:TCB_Post_Edit_Data.admin_nonce,post_id:TCB_Post_Edit_Data.post_id,action:"tcb_admin_ajax_controller",route:"migrate_post_content"}}).done(function(){location.href=e.getAttribute("data-edit")}).fail(function(t){alert("ERROR: "+t.responseText)})}).on("click","#tcb2-show-wp-editor",function(){var t=n.find(".tcb-enable-editor"),e=t.closest(".postbox");e.next(".tcb-flags").find("input").prop("disabled",!1),e.before(t),e.remove(),o("body").removeClass("tcb-hide-wp-editor")}).on("click",".tcb-enable-editor",function(){o("body").addClass("tcb-hide-wp-editor"),o.ajax({type:"post",url:ajaxurl,dataType:"json",data:{_nonce:TCB_Post_Edit_Data.admin_nonce,post_id:this.getAttribute("data-id"),action:"tcb_admin_ajax_controller",route:"enable_tcb"}}).done(function(){o(window).off("beforeunload.edit-post"),o("input#save-post").trigger("click")})})})}(jQuery);